---
import Layout from '../layouts/Layout.astro';
import RedFlagList from '../components/RedFlagList.svelte';
import DashboardStats from '../components/DashboardStats.svelte';
import DashboardCharts from '../components/DashboardCharts.svelte';
---

<Layout title="Dashboard | Veeduría Ciudadana">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
		<header class="mb-10 flex flex-col md:flex-row md:items-center justify-between gap-4">
			<div>
				<h1 class="text-3xl font-bold text-white">Dashboard de Riesgo</h1>
				<p class="text-gray-400">Monitoreo en tiempo real de la contratación pública.</p>
			</div>
			<div class="flex gap-2">
				<button class="glass-button !bg-brand-500/20 active">Diario</button>
				<button class="px-6 py-2 rounded-full border border-white/10 text-gray-400 hover:bg-white/5 transition-colors">Semanal</button>
				<button class="px-6 py-2 rounded-full border border-white/10 text-gray-400 hover:bg-white/5 transition-colors">Mensual</button>
			</div>
		</header>

		<!-- Main Grid -->
		<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
			<!-- Main Map Area (Mock) -->
			<div class="lg:col-span-2 glass-panel rounded-2xl p-6 h-[500px] flex flex-col relative overflow-hidden group">
				<div class="absolute inset-0 bg-[url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Colombia_relief_location_map.jpg/612px-Colombia_relief_location_map.jpg')] bg-cover bg-center opacity-20 mix-blend-overlay grayscale group-hover:scale-105 transition-transform duration-700"></div>
				<div class="absolute inset-0 bg-gradient-to-t from-obsidian-950 via-transparent to-transparent"></div>

				<h3 class="relative z-10 text-xl font-semibold mb-4 text-white">Mapa de Calor: Riesgo de Corrupción</h3>

				<!-- Mock Hotspots -->
				<div class="absolute top-1/3 left-1/3 w-24 h-24 bg-red-500/30 rounded-full blur-xl animate-pulse"></div>
				<div class="absolute top-1/2 left-1/2 w-32 h-32 bg-orange-500/20 rounded-full blur-xl animate-pulse delay-700"></div>
				<div class="absolute bottom-1/3 right-1/4 w-16 h-16 bg-red-500/40 rounded-full blur-xl animate-pulse delay-300"></div>

				<DashboardStats client:load />
			</div>

			<!-- Dynamic Red Flags List - Loads from daily_report.json -->
			<RedFlagList client:load />
		</div>

		<!-- Charts Section -->
			<DashboardCharts client:load />
	</div>
</Layout>
